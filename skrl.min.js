// Skrl Â© 2014-2015 Andrey Polischuk github.com/andrepolischuk/skrl
!function(){function a(a){function f(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,function(){c.call(a,window.event)})}function g(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function h(){var a={el:{},cont:{}};return a.el.offset=b.offsetTop,a.el.size=b.clientHeight,a.cont.offset=c.offsetTop,a.cont.size=c.clientHeight,a}function i(a){g(a),a="touchmove"===a.type?a.changedTouches[0]:a,b.setAttribute("data-touch",a.clientY-b.offsetTop)}function j(c){if(g(c),c="touchmove"===c.type?c.changedTouches[0]:c,b.getAttribute("data-touch")){var d=parseInt(b.getAttribute("data-touch")),e=c.clientY-b.offsetTop-d;e=a.reverse?-e:e;var f=n(e);m(f,function(){b.setAttribute("data-touch",c.clientY-b.offsetTop)})}}function k(a){g(a),a="touchmove"===a.type?a.changedTouches[0]:a,b.removeAttribute("data-touch")}function l(b){g(b);var c=b.deltaY||b.detail||-b.wheelDelta;c/=Math.abs(c),c=a.reverse?-c:c;var d=n(a.interval*-c);m(d)}function m(b,d){if(0!==b){var e=h();b=e.cont.offset-e.el.offset+b,c.style.top=b+"px","function"==typeof a.callback&&a.callback(e.cont.offset-e.el.offset),"function"==typeof d&&d()}}function n(a){var b=h();return a>0&&b.el.offset-b.cont.offset<Math.abs(a)?a=b.el.offset-b.cont.offset:0>a&&b.cont.offset+b.cont.size-(b.el.offset+b.el.size)<Math.abs(a)&&(a=b.el.offset+b.el.size-(b.cont.offset+b.cont.size)),a}a.reverse=a.reverse||!1,a.interval=a.interval||50;var c,b=this.el=a.element;b.setAttribute("data-skrl",!0);var d=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),e=["wheel","mousewheel","scroll","DOMMouseScroll"];if(this.go=function(a){var e=/^(\d+)(px|%)?$/,f=h(),g=f.cont.size-f.el.size,i=(""+a).replace(e,"$2");i=i||"px",a=parseInt((""+a).replace(e,"$1")),a="%"===i?g*a/100:a,a=a>g?g:a;var j=b.offsetTop-c.offsetTop,k=60*(g/1e3);!function l(b){b!==a&&(b=a>j?b+k:b-k,b=0>b?0:b,b=b>g?g:b,c.style.top=-b+"px",d(function(){l(b)}))}(j)},c=document.createElement("div"),c.innerHTML=b.innerHTML,c.style.display="inline-block",c.style.position="relative",b.innerHTML="",b.appendChild(c),"ontouchstart"in window||"onmsgesturechange"in window)f(b,"touchstart",i),f(b,"touchmove",j),f(b,"touchend",k);else for(var o=0;o<e.length;o++)if("on"+e[o]in window){f(b,e[o],l);break}}function b(b,c,d){return b=document.getElementById(b),b.getAttribute("data-skrl")?void 0:("function"==typeof c?(d=c,c={}):(c=c||{},d=d||void 0),c.element=b,c.callback=d,new a(c))}"function"==typeof define&&define.amd?define([],function(){return b}):"undefined"!=typeof module&&module.exports?module.exports=b:this.skrl=b}.call(this);
