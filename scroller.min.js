// Scroller Â© 2014 Andrey Polischuk
// https://github.com/andrepolischuk/scroller
!function(){function a(a){function e(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function f(){var a={el:{},cont:{}};return a.el.offset=b.offsetTop,a.el.size=b.clientHeight,a.cont.offset=c.offsetTop,a.cont.size=c.clientHeight,a}function g(a){a=a||window.event,e(a),a="touchmove"===a.type?a.changedTouches[0]:a,b.setAttribute("data-touch",a.clientY-b.offsetTop)}function h(c){if(c=c||window.event,e(c),c="touchmove"===c.type?c.changedTouches[0]:c,b.getAttribute("data-touch")){var d=parseInt(b.getAttribute("data-touch")),f=c.clientY-b.offsetTop-d;f=a.reverse?-f:f;var g=l(f);k(g,function(){b.setAttribute("data-touch",c.clientY-b.offsetTop)})}}function i(a){a=a||window.event,e(a),a="touchmove"===a.type?a.changedTouches[0]:a,b.removeAttribute("data-touch")}function j(b){b=b||window.event,e(b);var c=b.deltaY||b.detail||-b.wheelDelta;c/=Math.abs(c),c=a.reverse?-c:c;var d=l(a.interval*-c);k(d)}function k(b,d){if(0!==b){var e=f();b=e.cont.offset-e.el.offset+b,c.style.top=b+"px","function"==typeof a.callback&&a.callback(e.cont.offset-e.el.offset),"function"==typeof d&&d()}}function l(a){var b=f();return a>0&&b.el.offset-b.cont.offset<Math.abs(a)?a=b.el.offset-b.cont.offset:0>a&&b.cont.offset+b.cont.size-(b.el.offset+b.el.size)<Math.abs(a)&&(a=b.el.offset+b.el.size-(b.cont.offset+b.cont.size)),a}a.reverse=a.reverse||!1,a.interval=a.interval||50;var c,b=this.el=a.element;b.setAttribute("data-scroller",!0);var d=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();this.go=function(a){var e=/^(\d+)(px|%)?$/,g=f(),h=g.cont.size-g.el.size,i=(""+a).replace(e,"$2");i=i||"px",a=parseInt((""+a).replace(e,"$1")),a="%"===i?h*a/100:a,a=a>h?h:a;var j=b.offsetTop-c.offsetTop,k=60*(h/1e3);!function l(b){b!==a&&(b=a>j?b+k:b-k,b=0>b?0:b,b=b>h?h:b,c.style.top=-b+"px",d(function(){l(b)}))}(j)},c=document.createElement("div"),c.innerHTML=b.innerHTML,c.style.display="inline-block",c.style.position="relative",b.innerHTML="",b.appendChild(c),"ontouchstart"in window||"onmsgesturechange"in window?(b.addEventListener("touchstart",g,!1),b.addEventListener("touchmove",h,!1),b.addEventListener("touchend",i,!1)):"function"==typeof window.addEventListener?"onwheel"in window?b.addEventListener("wheel",j,!1):"onmousewheel"in window?b.addEventListener("mousewheel",j,!1):"onscroll"in window?b.addEventListener("scroll",j,!1):b.addEventListener("DOMMouseScroll",j,!1):b.attachEvent("onmousewheel",j)}function b(b,c,d){return b=document.getElementById(b),b.getAttribute("data-scroller")?void 0:("function"==typeof c?(d=c,c={}):(c=c||{},d=d||void 0),c.element=b,c.callback=d,new a(c))}"function"==typeof define&&define.amd?define([],function(){return b}):"undefined"!=typeof module&&module.exports?module.exports=b:this.scroller=b}.call(this);
