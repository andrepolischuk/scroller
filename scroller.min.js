// Scroller Â© 2014 Andrey Polischuk
// https://github.com/andrepolischuk/scroller
!function(){function a(a){function e(){var a={el:{},cont:{}};return a.el.offset=b.offsetTop,a.el.size=b.clientHeight,a.cont.offset=c.offsetTop,a.cont.size=c.clientHeight,a}function f(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1,a="touchmove"===a.type?a.changedTouches[0]:a,b.setAttribute("data-touch",a.clientY-b.offsetTop)}function g(c){if(c=c||window.event,c.preventDefault?c.preventDefault():c.returnValue=!1,c="touchmove"===c.type?c.changedTouches[0]:c,b.getAttribute("data-touch")){var d=parseInt(b.getAttribute("data-touch")),e=c.clientY-b.offsetTop-d;e=a.reverse?-e:e;var f=k(e);j(f,function(){b.setAttribute("data-touch",c.clientY-b.offsetTop)})}}function h(a){a=a||window.event,a.preventDefault?a.preventDefault():a.returnValue=!1,a="touchmove"===a.type?a.changedTouches[0]:a,b.removeAttribute("data-touch")}function i(b){b=b||window.event,b.preventDefault?b.preventDefault():b.returnValue=!1;var c=b.deltaY||b.detail||-b.wheelDelta;c/=Math.abs(c),c=a.reverse?-c:c;var d=k(a.interval*-c);j(d)}function j(b,d){if(0!==b){var f=e();b=f.cont.offset-f.el.offset+b,c.style.top=b+"px","function"==typeof a.callback&&a.callback(f.cont.offset-f.el.offset),"function"==typeof d&&d()}}function k(a){var b=e();return a>0&&b.el.offset-b.cont.offset<Math.abs(a)?a=b.el.offset-b.cont.offset:0>a&&b.cont.offset+b.cont.size-(b.el.offset+b.el.size)<Math.abs(a)&&(a=b.el.offset+b.el.size-(b.cont.offset+b.cont.size)),a}a.reverse=a.reverse||!1,a.interval=a.interval||50;var c,b=this.el=a.element;b.setAttribute("data-scroller",!0);var d=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();this.go=function(a){var f=/^(\d+)(px|%)?$/,g=e(),h=g.cont.size-g.el.size,i=(""+a).replace(f,"$2");i=i||"px",a=parseInt((""+a).replace(f,"$1")),a="%"===i?h*a/100:a,a=a>h?h:a;var j=b.offsetTop-c.offsetTop,k=60*(h/1e3);!function l(b){b!==a&&(b=a>j?b+k:b-k,b=0>b?0:b,b=b>h?h:b,c.style.top=-b+"px",d(function(){l(b)}))}(j)},c=document.createElement("div"),c.innerHTML=b.innerHTML,c.style.display="inline-block",c.style.position="relative",b.innerHTML="",b.appendChild(c),"ontouchstart"in window||"onmsgesturechange"in window?(b.addEventListener("touchstart",f,!1),b.addEventListener("touchmove",g,!1),b.addEventListener("touchend",h,!1)):"function"==typeof window.addEventListener?"onwheel"in window?b.addEventListener("wheel",i,!1):"onmousewheel"in window?b.addEventListener("mousewheel",i,!1):"onscroll"in window?b.addEventListener("scroll",i,!1):b.addEventListener("DOMMouseScroll",i,!1):b.attachEvent("onmousewheel",i)}function b(b,c,d){return b=document.getElementById(b),b.getAttribute("data-scroller")?void 0:("function"==typeof c?(d=c,c={}):(c=c||{},d=d||void 0),c.element=b,c.callback=d,new a(c))}"function"==typeof define&&define.amd?define([],function(){return b}):"undefined"!=typeof module&&module.exports?module.exports=b:this.scroller=b}.call(this);
